<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Fiche produit</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>

<h1>Fiche produit</h1>

<div id="boutonEdit" th:if="${session.customer.type.equals('producer')}">
    <input type="button" class="boutonEdit" value="Faire une modification?">
</div>

<form method="post" enctype="multipart/form-data" action="/editproductresult" )
<label for='name'>Nom :</label>
<input type="text" id="name" class="edit" name="name" th:value="${product.name}" disabled
       placeholder="Entrez son nom" required='true'>
<br>
<label for='description'>Description :</label>
<input type="text" id="description" class="edit" name="description" th:value="${product.description}" disabled
       placeholder="Entrez sa description" required='true'>
<br>
<label for='price'>Prix :</label>
<input type="tel" id="price" class="edit" name="price" th:value="${product.price}" disabled
       placeholder="Entrez son prix" required='true' pattern="[0-9 ]{1,}[,.]{0,1}[0-9]{0,2}">
<br>
<label for="productCategory">Catégorie de produit:</label>
<select name="productCategory" id="productCategory">
    <option value="1">Fruit et légume</option>
    <option value="2">Viande</option>
    <option value="3">Produit laitier</option>
</select>
<input type="hidden" name="id" th:value="${product.id}">
<input type="hidden" id="categoryId" th:value="${product.category?.id}">
<br>
<input type="submit" class="edit" disabled value="Envoyer les modifier" th:if="${session.customer.type.equals('producer')}">
</form>

<form method="post" action="/removeproductconfirm" th:if="${session.customer.type.equals('producer')}">
    <input type="hidden" name="id" id="id" th:value="${product.id}">
    <input type="submit" value="Supprimer">
</form>

<script type="text/javascript">
    const d = document.getElementById("boutonEdit");
    const log = document.querySelectorAll(".edit");
    d.addEventListener('click', function () {
        log.forEach(e => e.disabled = false);
    })
    const f = document.getElementById("categoryId");
    let productCategory = document.getElementById("productCategory");
    productCategory.value = f.value;
</script>
</body>
</html>
